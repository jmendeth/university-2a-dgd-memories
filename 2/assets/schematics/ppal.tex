  % Pin (INPUT) named nkey
  \draw[input pin] (4.8571,-2.0000) -- (5.4524,-2.0000) -- (5.5476,-1.9048) -- (5.4524,-1.8095) -- (4.8571,-1.8095) -- cycle;
  \draw[pin name] (4.8571,-1.9048) node[anchor=east] {$\nodenamebit{nkey}$};

  % Pin (INPUT) named keycode[3..0]
  \draw[input pin] (4.8571,-2.7619) -- (5.4524,-2.7619) -- (5.5476,-2.6667) -- (5.4524,-2.5714) -- (4.8571,-2.5714) -- cycle;
  \draw[pin name] (4.8571,-2.6667) node[anchor=east] {$\nodenamerange{keycode}{3}{0}$};

  % Pin (INPUT) named clk
  \draw[input pin] (4.8571,-4.6667) -- (5.4524,-4.6667) -- (5.5476,-4.5714) -- (5.4524,-4.4762) -- (4.8571,-4.4762) -- cycle;
  \draw[pin name] (4.8571,-4.5714) node[anchor=east] {$\nodenamebit{clk}$};

  % Pin (INPUT) named nrst
  \draw[input pin] (4.8571,-5.2381) -- (5.4524,-5.2381) -- (5.5476,-5.1429) -- (5.4524,-5.0476) -- (4.8571,-5.0476) -- cycle;
  \draw[pin name] (4.8571,-5.1429) node[anchor=east] {$\nodenamebit{nrst}$};

  % Pin (OUTPUT) named show
  \draw[output pin] (16.0952,-2.3810) -- (16.7143,-2.3810) -- (16.8095,-2.4762) -- (16.7143,-2.5714) -- (16.0952,-2.5714) -- cycle;
  \draw[pin name] (16.8095,-2.4762) node[anchor=west] {$\nodenamebit{show}$};

  % Pin (OUTPUT) named opA[3..0]
  \draw[output pin] (16.0952,-10.7619) -- (16.7143,-10.7619) -- (16.8095,-10.8571) -- (16.7143,-10.9524) -- (16.0952,-10.9524) -- cycle;
  \draw[pin name] (16.8095,-10.8571) node[anchor=west] {$\nodenamerange{opA}{3}{0}$};

  % Pin (OUTPUT) named opB[3..0]
  \draw[output pin] (16.0952,-11.3333) -- (16.7143,-11.3333) -- (16.8095,-11.4286) -- (16.7143,-11.5238) -- (16.0952,-11.5238) -- cycle;
  \draw[pin name] (16.8095,-11.4286) node[anchor=west] {$\nodenamerange{opB}{3}{0}$};

  % Pin (OUTPUT) named res[7..0]
  \draw[output pin] (16.0952,-12.2857) -- (16.7143,-12.2857) -- (16.8095,-12.3810) -- (16.7143,-12.4762) -- (16.0952,-12.4762) -- cycle;
  \draw[pin name] (16.8095,-12.3810) node[anchor=west] {$\nodenamerange{res}{7}{0}$};

  % Symbol (keygroup) named inst2
  \draw[symbol bounds] (7.8095,-1.1429) rectangle (10.0952,-3.4286);
  \draw[symbol type] (8.4762,-1.2857) node[] {keygroup};
  \draw[symbol] (8.1905,-1.5238) rectangle (9.7143,-3.0476);
  \draw[port name] (8.2857,-2.6667) node[anchor=west] {$\nodenamerange{x}{3}{0}$};
  \draw[port name] (8.2857,-1.9048) node[anchor=west] {$\nodenamebit{nkey}$};
  \draw[port name] (9.6190,-1.9048) node[anchor=east] {$\nodenamebit{bcd}$};
  \draw[port name] (9.6190,-2.2857) node[anchor=east] {$\nodenamebit{ast}$};
  \draw[port name] (9.6190,-2.6667) node[anchor=east] {$\nodenamebit{coi}$};

  % Symbol (regs) named inst3
  \draw[symbol bounds] (11.6190,-5.7143) rectangle (15.4286,-8.7619);
  \draw[symbol type] (11.9881,-5.8571) node[] {regs};
  \draw[symbol] (12.0000,-6.0952) rectangle (15.0476,-8.3810);
  \draw[port name] (13.3333,-8.2857) node[anchor=west, rotate=90] {$\nodenamebit{clk}$};
  \draw[port name] (13.7143,-8.2857) node[anchor=west, rotate=90] {$\nodenamebit{nrst}$};
  \draw[port name] (13.5238,-6.1905) node[anchor=east, rotate=90] {$\nodenamebit{intro}$};
  \draw[port name] (12.0952,-7.2381) node[anchor=west] {$\nodenamerange{keycode}{3}{0}$};
  \draw[port name] (14.9524,-6.8571) node[anchor=east] {$\nodenamerange{opA}{3}{0}$};
  \draw[port name] (14.9524,-7.6190) node[anchor=east] {$\nodenamerange{opB}{3}{0}$};

  % Symbol (control) named inst
  \draw[symbol bounds] (10.0952,-0.7619) rectangle (13.1429,-3.8095);
  \draw[symbol type] (10.6071,-0.9048) node[] {control};
  \draw[symbol] (10.4762,-1.1429) rectangle (12.7619,-3.4286);
  \draw[port name] (11.8095,-3.3333) node[anchor=west, rotate=90] {$\nodenamebit{nrst}$};
  \draw[port name] (10.5714,-1.9048) node[anchor=west] {$\nodenamebit{bcd}$};
  \draw[port name] (10.5714,-2.2857) node[anchor=west] {$\nodenamebit{ast}$};
  \draw[port name] (10.5714,-2.6667) node[anchor=west] {$\nodenamebit{coi}$};
  \draw[port name] (11.4286,-3.3333) node[anchor=west, rotate=90] {$\nodenamebit{clk}$};
  \draw[port name] (12.6667,-2.0952) node[anchor=east] {$\nodenamebit{intro}$};
  \draw[port name] (12.6667,-2.4762) node[anchor=east] {$\nodenamebit{show}$};

  % Symbol (sel) named inst1
  \draw[symbol bounds] (10.4762,-11.2381) rectangle (13.9048,-13.5238);
  \draw[symbol type] (10.7619,-11.3810) node[] {sel};
  \draw[symbol] (10.8571,-11.6190) rectangle (13.5238,-13.1429);
  \draw[port name] (10.9524,-12.3810) node[anchor=west] {$\nodenamerange{res}{7}{0}$};
  \draw[port name] (12.1905,-11.7143) node[anchor=east, rotate=90] {$\nodenamebit{show}$};
  \draw[port name] (13.4286,-12.3810) node[anchor=east] {$\nodenamerange{sel}{7}{0}$};

  % Symbol (AperB) named inst4
  \draw[symbol bounds] (7.2381,-11.2381) rectangle (10.4762,-13.5238);
  \draw[symbol type] (7.7024,-11.3810) node[] {AperB};
  \draw[symbol] (7.6190,-11.6190) rectangle (10.0952,-13.1429);
  \draw[port name] (7.7143,-12.0000) node[anchor=west] {$\nodenamerange{A}{3}{0}$};
  \draw[port name] (7.7143,-12.7619) node[anchor=west] {$\nodenamerange{B}{3}{0}$};
  \draw[port name] (10.0000,-12.3810) node[anchor=east] {$\nodenamerange{AxB}{7}{0}$};

  \draw[bus line] (16.0952,-12.3810) -- (14.8571,-12.3810) -- (13.9048,-12.3810) -- (13.5238,-12.3810);
  \draw[node line, ->] (12.1905,-10.2857) -- (12.1905,-11.2381) -- (12.1905,-11.6190);
  \draw[bus line, ->] (6.2857,-12.7619) -- (7.2381,-12.7619) -- (7.6190,-12.7619);
  \draw[bus line, ->] (6.2857,-12.0000) -- (7.2381,-12.0000) -- (7.6190,-12.0000);
  \draw[bus line, ->] (7.4286,-2.6667) -- (7.8095,-2.6667) -- (8.1905,-2.6667);
  \draw[bus line] (7.4286,-2.6667) -- (6.6667,-2.6667) -- (5.5357,-2.6667);
  \draw[bus line, ->] (7.4286,-2.6667) -- (7.4286,-7.2381) -- (11.6190,-7.2381) -- (12.0000,-7.2381);
  \draw[node line, ->] (13.5238,-4.9524) -- (13.5238,-5.7143) -- (13.5238,-6.0952);
  \draw[bus line] (16.3810,-7.6190) -- (15.4286,-7.6190) -- (15.0476,-7.6190);
  \draw[bus line] (16.3810,-6.8571) -- (15.4286,-6.8571) -- (15.0476,-6.8571);
  \draw[node line, ->] (13.7143,-9.3333) -- (13.7143,-8.7619) -- (13.7143,-8.3810);
  \draw[node line, ->] (13.3333,-9.3333) -- (13.3333,-8.7619) -- (13.3333,-8.3810);
  \draw[node line, ->] (5.5357,-1.9048) -- (6.6667,-1.9048) -- (7.8095,-1.9048) -- (8.1905,-1.9048);
  \draw[node line] (13.9048,-2.4762) -- (13.1429,-2.4762) -- (12.7619,-2.4762);
  \draw[node line, ->] (11.8095,-4.3810) -- (11.8095,-3.8095) -- (11.8095,-3.4286);
  \draw[node line, ->] (11.4286,-4.3810) -- (11.4286,-3.8095) -- (11.4286,-3.4286);
  \draw[node line] (13.9048,-2.0952) -- (13.1429,-2.0952) -- (12.7619,-2.0952);
  \draw[bus line, ->] (10.0952,-12.3810) -- (10.4762,-12.3810) -- (10.8571,-12.3810);
  \draw[node line, ->] (9.7143,-2.6667) -- (10.0952,-2.6667) -- (10.4762,-2.6667);
  \draw[node line, ->] (9.7143,-2.2857) -- (10.0952,-2.2857) -- (10.4762,-2.2857);
  \draw[node line, ->] (9.7143,-1.9048) -- (10.0952,-1.9048) -- (10.4762,-1.9048);
  \draw[bus line] (14.8571,-11.4286) -- (16.0952,-11.4286);
  \draw[bus line] (14.8571,-10.8571) -- (16.0952,-10.8571);
  \draw[node line] (14.8571,-2.4762) -- (16.0952,-2.4762);
  \draw[node line] (6.6667,-5.1429) -- (5.5357,-5.1429);
  \draw[node line] (6.6667,-4.5714) -- (5.5357,-4.5714);
  \draw[line name] (13.8333,-2.0000) node[anchor=south east] {$\nodenamebit{intro}$};
  \draw[line name] (11.3333,-4.4286) node[anchor=south west, rotate=90] {$\nodenamebit{clk}$};
  \draw[line name] (11.7143,-4.4286) node[anchor=south west, rotate=90] {$\nodenamebit{nrst}$};
  \draw[line name] (13.9048,-2.3810) node[anchor=south east] {$\nodenamebit{show}$};
  \draw[line name] (13.2381,-9.3810) node[anchor=south west, rotate=90] {$\nodenamebit{clk}$};
  \draw[line name] (13.6190,-9.3810) node[anchor=south west, rotate=90] {$\nodenamebit{nrst}$};
  \draw[line name] (16.5476,-6.7619) node[anchor=south east] {$\nodenamerange{opA}{3}{0}$};
  \draw[line name] (16.5238,-7.5238) node[anchor=south east] {$\nodenamerange{opB}{3}{0}$};
  \draw[line name] (13.4286,-4.9048) node[anchor=south east, rotate=90] {$\nodenamebit{intro}$};
  \draw[line name] (6.2619,-11.9048) node[anchor=south west] {$\nodenamerange{opA}{3}{0}$};
  \draw[line name] (6.2619,-12.6667) node[anchor=south west] {$\nodenamerange{opB}{3}{0}$};
  \draw[line name] (12.0952,-10.9286) node[anchor=south west, rotate=90] {$\nodenamebit{show}$};
  \draw[junction] (7.4286,-2.6667) node[contact] {};
